<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      data-namespace-typo3-fluid="true">

<f:layout name="Backend" />

<f:section name="headline">
    <h1>
        Accessibility Check Result
    </h1>
</f:section>

<f:section name="content">

    <div class="panel-group panel-group-a11y" role="tablist" aria-multiselectable="true">
        <f:for each="{results}" as="resultSet" iteration="i">
            <div class="panel panel-default panel-a11y">
                <div class="panel-heading impact-{resultSet.impact}" role="tab" id="heading-{i.index}">
                    <h2 class="panel-title">
                        <a href="#resultset-{i.index}" class="collapsed" data-toggle="collapse" aria-controls="#resultset-{i.index}">
                            <i class="fa fa-times"></i>
                            Page: <strong>{resultSet.pid}</strong> (@todo: Icon rechts)
                        </a>
                    </h2>
                </div>
                <div class="panel-collapse collapse" id="resultset-{i.index}" role="tabpanel" aria-expanded="false">
                    <div class="panel-body" role="tablist" aria-multiselectable="false">
                        <f:for each="{resultSet.results}" as="result">
                            <f:be.infobox state="{result.state}" title="{result.title}" message="{result.description}" />

                            <f:if condition="{result.hasErrors}">
                                <table class="table table-striped table-bordered">
                                    <tbody>
                                        <tr>
                                            <td><strong>Impact:</strong></td>
                                            <td>{result.impact}</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Help:</strong></td>
                                            <td>{result.help}</td>
                                        </tr>
                                        <f:if condition="{result.helpUrl}">
                                            <tr>
                                                <td><strong>Help URL:</strong></td>
                                                <td><f:link.external uri="{result.helpUrl}" target="_blank">{result.helpUrl}</f:link.external></td>
                                            </tr>
                                        </f:if>
                                    </tbody>
                                </table>

                                <f:groupedFor each="{result.nodes}" as="nodes" groupBy="uid" groupKey="elementUid">
                                    <div>
                                        <div>Element UID ({checkDemand.preset.checkTableName}): {elementUid} (@todo: Edit Icon + Record Name)</div>
                                        <f:for each="{nodes}" as="node">
                                            <pre>{node.html}</pre>
                                        </f:for>
                                    </div>
                                </f:groupedFor>
                            </f:if>
                        </f:for>
                    </div>
                </div>
            </div>
        </f:for>
    </div>

</f:section>

</html>